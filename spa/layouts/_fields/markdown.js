import{SvelteComponent,attr,children,claim_element,detach,element,empty,init,insert_hydration,listen,noop,safe_not_equal,set_input_value,toggle_class}from"../../web_modules/svelte/internal/index.mjs";import hljs from"../dist/highlight.min.js";import{Marked}from"../../web_modules/marked/lib/marked.esm.js";import{markedHighlight}from"../../web_modules/marked-highlight/src/index.js";import{HtmlSanitizer}from"../scripts/html_sanitizer.js";function create_if_block(e){let t,n,s;return{c(){t=element("textarea"),this.h()},l(e){t=claim_element(e,"TEXTAREA",{class:!0}),children(t).forEach(detach),this.h()},h(){t.disabled=e[1],attr(t,"class","svelte-z4apeh"),toggle_class(t,"disabled",e[1])},m(o,i){insert_hydration(o,t,i),set_input_value(t,e[0].markdown),n||(s=listen(t,"input",e[5]),n=!0)},p(e,n){n&2&&(t.disabled=e[1]),n&1&&set_input_value(t,e[0].markdown),n&2&&toggle_class(t,"disabled",e[1])},d(e){e&&detach(t),n=!1,s()}}}function create_fragment(e){let n,t=!e[2]&&create_if_block(e);return{c(){t&&t.c(),n=empty()},l(e){t&&t.l(e),n=empty()},m(e,s){t&&t.m(e,s),insert_hydration(e,n,s)},p(e,[s]){e[2]?t&&(t.d(1),t=null):t?t.p(e,s):(t=create_if_block(e),t.c(),t.m(n.parentNode,n))},i:noop,o:noop,d(e){t&&t.d(e),e&&detach(n)}}}function instance(e,t,n){let{schema:o,parentKeys:i,field:s}=t;const a=new HtmlSanitizer;a.AllowedAttributes.class=!0;const l=new Marked(markedHighlight({emptyLangClass:"hljs",langPrefix:"hljs language-",highlight(e,t){const s=hljs.getLanguage(t)?t:"plaintext";return hljs.highlight(e,{language:s}).value}}));let r,c;o?.[i]?.options?.length&&(r=o[i].options.includes("disabled"),c=o[i].options.includes("hidden"));function d(){let e=l.parse(s.markdown);e=a.SanitizeHtml(e),n(0,s.rendered=e,s)}function u(){s.markdown=this.value,n(0,s)}return e.$$set=e=>{"schema"in e&&n(3,o=e.schema),"parentKeys"in e&&n(4,i=e.parentKeys),"field"in e&&n(0,s=e.field)},e.$$.update=()=>{if(e.$$.dirty&1)$:s.markdown&&d()},[s,r,c,o,i,u]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{schema:3,parentKeys:4,field:0})}}export default Component