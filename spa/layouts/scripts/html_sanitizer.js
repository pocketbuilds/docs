import{SvelteComponent,init,safe_not_equal}from"../../web_modules/svelte/internal/index.mjs";class HtmlSanitizer{static tagWhitelist={A:!0,ABBR:!0,B:!0,BLOCKQUOTE:!0,BODY:!0,BR:!0,CENTER:!0,CODE:!0,DD:!0,DIV:!0,DL:!0,DT:!0,EM:!0,FONT:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HR:!0,I:!0,IMG:!0,LABEL:!0,LI:!0,OL:!0,P:!0,PRE:!0,S:!0,STRIKE:!0,SMALL:!0,SOURCE:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,TABLE:!0,TBODY:!0,TR:!0,TD:!0,TH:!0,THEAD:!0,UL:!0,U:!0,VIDEO:!0};static tagConvertMapping={STRIKE:"S",FORM:"DIV","GOOGLE-SHEETS-HTML-ORIGIN":"DIV"};static attributeWhitelist={align:!0,color:!0,controls:!0,height:!0,href:!0,id:!0,src:!0,style:!1,target:!0,title:!0,type:!0,width:!0};static classWhitelist={};static cssWhitelist={"background-color":!1,color:!1,"font-size":!1,"font-weight":!1,"text-align":!1,"text-decoration":!1,width:!1};static schemaWhiteList=["http:","https:","data:","m-files:","file:","ftp:","mailto:","pw:"];static uriAttributes={href:!0,action:!0};SanitizeHtml(e,t){const o=new DOMParser;if(e=e.trim(),e=="")return"";if(e=="<br>")return"";e.indexOf("<body")==-1&&(e="<body>"+e+"</body>");let n=o.parseFromString(e,"text/html");n.body.tagName!=="BODY"&&n.body.remove(),typeof n.createElement!="function"&&n.createElement.remove();const s=e=>{let o;if(e.nodeType==Node.TEXT_NODE)o=e.cloneNode(!0);else if(e.nodeType==Node.ELEMENT_NODE&&(this.AllowedTags[e.tagName]||this.TagConvertMapping[e.tagName]||t&&e.matches(t))){{this.TagConvertMapping[e.tagName]?o=n.createElement(this.TagConvertMapping[e.tagName]):o=n.createElement(e.tagName);for(let n=0;n<e.attributes.length;n++){let t=e.attributes[n];if(this.AllowedAttributes[t.name])if(t.name=="style")for(let t=0;t<e.style.length;t++){let n=e.style[t];this.AllowedCssStyles[n]&&o.style.setProperty(n,e.style.getPropertyValue(n))}else if(t.name=="class"&&Object.keys(this.AllowedClasses).length)e.classList.forEach(e=>{this.AllowedClasses[e]&&o.classList.add(e)});else{if(HtmlSanitizer.uriAttributes[t.name]&&t.value.indexOf(":")>-1&&!this.startsWithAny(t.value,HtmlSanitizer.schemaWhiteList))continue;o.setAttribute(t.name,t.value)}}for(let t=0;t<e.childNodes.length;t++){let n=s(e.childNodes[t]);o.appendChild(n,!1)}if((o.tagName=="SPAN"||o.tagName=="B"||o.tagName=="I"||o.tagName=="U")&&o.innerHTML.trim()=="")return n.createDocumentFragment()}}else o=n.createDocumentFragment();return o};let i=s(n.body);return i.innerHTML.replace(/<br[^>]*>(\S)/g,`<br>
$1`).replace(/div><div/g,`div>
<div`)}startsWithAny(e,t){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])==0)return!0;return!1}constructor(){this.AllowedTags=HtmlSanitizer.tagWhitelist,this.AllowedAttributes=HtmlSanitizer.attributeWhitelist,this.AllowedClasses=HtmlSanitizer.classWhitelist,this.AllowedCssStyles=HtmlSanitizer.cssWhitelist,this.AllowedSchemas=HtmlSanitizer.schemaWhiteList,this.TagConvertMapping=HtmlSanitizer.tagConvertMapping}}class Component extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}export default Component;export{HtmlSanitizer}