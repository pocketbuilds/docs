<!doctype html><html data-content-filepath=content/docs/plugin-validation.json lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Plugin Validation</title>
<script type=module src=/spa/core/main.js?USCVvrAKgE></script><link rel=icon type=image/x-icon href=/pocketbuilds.svg><link rel=stylesheet href=/css/fonts.css?USCVvrAKgE><link rel=stylesheet href=/css/global.css?USCVvrAKgE><link rel=stylesheet href=/spa/bundle.css?USCVvrAKgE><body class=svelte-1kyjgcp><div class="wrapper svelte-1kyjgcp"><header class=svelte-1kyjgcp><nav class="container svelte-1fh7znp"><div class="left svelte-1fh7znp"><div class="brand svelte-1fh7znp"><a href=https://pocketbuilds.com/ class=svelte-1fh7znp><img src=/pocketbuilds.svg alt="PocketBuilds logo">
<span>Pocket<strong>Builds</strong></span></a></div><div>Documentation</div></div><div class="right svelte-1fh7znp"><div class=github><a href=https://github.com/pocketbuilds/xpb><img src=/github.svg alt="GitHub Octocat Icon"></a></div></div></nav></header><main class=svelte-1kyjgcp><nav class="svelte-sxid1i open"><ul class=svelte-sxid1i><li class="svelte-sxid1i index"><a href=/ class=svelte-sxid1i>PocketBuilds</a><li class="svelte-sxid1i group"><a href=/installing-xpb class=svelte-sxid1i>Installing XPB</a><li class="svelte-sxid1i group"><a href=/using-the-builder class=svelte-sxid1i>Using the Builder</a><li class="svelte-sxid1i group"><a href=/custom-application class=svelte-sxid1i>Custom Application</a><li class="svelte-sxid1i group"><a href=/creating-a-plugin class=svelte-sxid1i>Creating a Plugin</a><li class="svelte-sxid1i doc"><a href=/creating-a-plugin/plugin-config class=svelte-sxid1i>Plugin Config</a><li class="svelte-sxid1i doc current"><a href=/creating-a-plugin/plugin-validation class=svelte-sxid1i>Plugin Validation</a><li class="svelte-sxid1i doc"><a href=/creating-a-plugin/plugin-examples class=svelte-sxid1i>Examples</a></ul><button type=button class="svelte-1jv4msj vertical"><div class="inner svelte-1jv4msj"><svg width="25px" height="25px" viewBox="0 0 24 24" style="transform: scale(1); color: white; background: transparent; stroke-width: 2;"><use href="/icons/chevron-compact-left.svg"></use></svg></div></button></nav><div class="content svelte-1kyjgcp"><section><h1>Plugin Validation</h1><p>You may want to add validation to your plugin configuration to ensure that the user set the config in the intended way before your <code>plugin.Init</code> function runs.<p>To do this you only need to implement the <code>validation.Validateable</code> interface.<pre><code class="hljs language-go"><span class=hljs-keyword>type</span> Plugin <span class=hljs-keyword>struct</span> {
	MySlice []<span class=hljs-type>string</span> <span class=hljs-string>`json:"my_slice"`</span>
	MyString <span class=hljs-type>string</span> <span class=hljs-string>`json:"my_string"`</span>
}

<span class=hljs-comment>// Validate implements validation.Validatable.</span>
<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(p *Plugin)</span></span> Validate() <span class=hljs-type>error</span> {
	<span class=hljs-keyword>return</span> validation.ValidateStruct(p,
		validation.Field(&amp;p.MySlice,
			validation.Required,
			validation.Each(
				is.Email,
			),
		),
		validation.Field(&amp;p.MyString, validation.Required),
	)
}
</code></pre><h2>Prevalidation</h2><p>You can always set a default value for your plugin config when you register your plugin, as shown in the <a href=/creating-a-plugin/plugin-config>Plugin Config</a> section, but in some situations you need access to the pocketbase app in order to determine a default value. You can do this in the Init function, but then it would cause your validation to fail. For this situation, you can use the <code>xpb.PreValidator</code> interface.<pre><code class="hljs language-go"><span class=hljs-keyword>type</span> Plugin <span class=hljs-keyword>struct</span> {
	MyFilepath <span class=hljs-type>string</span> <span class=hljs-string>`json:"my_filepath"`</span>
}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(p *Plugin)</span></span> PreValidate(app core.App) <span class=hljs-type>error</span> {
	<span class=hljs-comment>// Set default filepath in relation to the app data dir.</span>
	<span class=hljs-keyword>if</span> p.MyFilepath == <span class=hljs-string>""</span> {
		p.MyFilepath = filepath.Join(app.DataDir(), <span class=hljs-string>"../my_dir/my_file.txt"</span>)
	}
	<span class=hljs-keyword>return</span> <span class=hljs-literal>nil</span>
}
</code></pre><div class="pager svelte-1bafxav"><div class=left><a href=/creating-a-plugin/plugin-config class=svelte-1bafxav><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l14 0"></path><path d="M5 12l4 4"></path><path d="M5 12l4 -4"></path></svg>
Previous: Plugin Config</a></div><div class=right><a href=/creating-a-plugin/plugin-examples class=svelte-1bafxav>Next: Examples<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M5 12l14 0"></path><path d="M15 16l4 -4"></path><path d="M15 8l4 4"></path></svg></a></div></div></section></div></main><footer class=svelte-dpy6p2><div class="wrapper container svelte-dpy6p2"><div class="left svelte-dpy6p2">Â© PocketBuilds 2025</div><div class="right svelte-dpy6p2"><div class="plenti svelte-dpy6p2"><a href=https://plenti.co/ target=_blank rel="noopener noreferrer" class=svelte-dpy6p2>Made with
<img src=/plenti.svg alt="plentico planarian" class=svelte-dpy6p2></a></div></div></div></footer></div>