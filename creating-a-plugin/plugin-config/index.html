<!doctype html><html data-content-filepath=content/docs/plugin-config.json lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Plugin Config</title>
<script type=module src=/spa/core/main.js?QNKxyFsatq></script><link rel=icon type=image/x-icon href=/pocketbuilds.svg><link rel=stylesheet href=/css/global.css?QNKxyFsatq><link rel=stylesheet href=/spa/bundle.css?QNKxyFsatq><body class=svelte-1jegtz2><div class="wrapper svelte-1jegtz2"><header class=svelte-1jegtz2><nav class=svelte-1fh7znp><div class="left svelte-1fh7znp"><div class="brand svelte-1fh7znp"><a href=https://pocketbuilds.com/ class=svelte-1fh7znp><img src=/pocketbuilds.svg alt="PocketBuilds logo">
<span>Pocket<strong>Builds</strong></span></a></div><div>Documentation</div></div><div class="right svelte-1fh7znp"><div class=github><a href=https://github.com/pocketbuilds/xpb><img src=/github.svg alt="GitHub Octocat Icon"></a></div></div></nav></header><main class=svelte-1jegtz2><nav class="svelte-a0t8d9 open"><ul class=svelte-a0t8d9><li class="svelte-a0t8d9 index"><a href=/ class=svelte-a0t8d9>PocketBuilds Docs</a><li class="svelte-a0t8d9 group"><a href=/installing-xpb class=svelte-a0t8d9>Installing XPB</a><li class="svelte-a0t8d9 group"><a href=/using-the-builder class=svelte-a0t8d9>Using the Builder</a><li class="svelte-a0t8d9 group"><a href=/creating-a-plugin class=svelte-a0t8d9>Creating a Plugin</a><li class="svelte-a0t8d9 doc current"><a href=/creating-a-plugin/plugin-config class=svelte-a0t8d9>Plugin Config</a></ul><button type=button class="svelte-1wyyo4v vertical"><div class="inner svelte-1wyyo4v"><svg width="25px" height="25px" viewBox="0 0 24 24" style="transform: scale(1); color: white; background: transparent; stroke-width: 2;"><use href="/icons/chevron-compact-left.svg"></use></svg></div></button></nav><div class="content svelte-1jegtz2"><section><h1>Plugin Config</h1><p>The xpb runtime uses a <code>pocketbuilds.toml</code> file to allow for the user to customize plugin config options. This file is read, converted to JSON, and then automatically Unmarshalled into your plugin struct.<p>Consider the example plugin below:<pre><code class="hljs language-go"><span class=hljs-keyword>type</span> Plugin <span class=hljs-keyword>struct</span> {
	MyVar <span class=hljs-type>string</span> <span class=hljs-string>`json:"my_var" env:"MY_VAR"`</span>
}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-title>init</span><span class=hljs-params>()</span></span> {
	xpb.Register(&amp;Plugin{
		MyVar: <span class=hljs-string>"Hello, xpb!"</span>,
	})
}

<span class=hljs-function><span class=hljs-keyword>func</span> <span class=hljs-params>(p *Plugin)</span></span> Name() <span class=hljs-type>string</span> {
	<span class=hljs-keyword>return</span> <span class=hljs-string>"my_plugin"</span>
}
</code></pre><p>This plugin defines a config variable of type string called <code>MyVar</code>. This variable will be populated with the <code>my_plugin.my_var</code> value in "pocketbuilds.toml". This happens before your plugin's <code>Init</code> function is called. See the corresponding TOML below:<pre><code class="hljs language-toml"><span class=hljs-section>[my_plugin]</span>
<span class=hljs-attr>my_var</span> = <span class=hljs-string>"Hello from TOML"</span>
</code></pre><p>The struct tag <code>env</code> can be used to specify an environment variable that will be set into your plugin struct. The environmental variable naming convention is: <code>XPB__PLUGIN_NAME__VARIABLE_NAME</code>, so for the above example the corresponding environment variable would be <code>XPB__MY_PLUGIN__MY_VAR</code>. The environment variable takes precedence over config from the file and will override any configuration from there.<p>You also may notice when the plugin is registered in the <code>init</code> function, is sets an initial value for <code>MyVar</code>. This is useful for setting your plugin's default config values if the user does not set it themselves.<p>For more custom config unmarshaling, the plugin struct can implement the interfaces <code>json.Unmarshaler</code> for the file config and <code>encoding.TextUnmarshaler</code> for the environment config.</p><div class="pager svelte-1x0xo3c"><div class=left><a href=/creating-a-plugin>Previous: Creating a Plugin</a></div><div class=right></div></div></section></div></main><footer class=svelte-1jegtz2><div class="wrapper svelte-13na8n2"><div class="left svelte-13na8n2"></div><div class="right svelte-13na8n2"><div class="plenti svelte-13na8n2"><a href=https://plenti.co/ class=svelte-13na8n2>Made with
<img src=/plenti.svg alt="plentico planarian"></a></div></div></div></footer></div>